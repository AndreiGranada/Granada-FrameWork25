# Environment variables declared in this file are automatically made available to Prisma.
# See the documentation for more detail: https://pris.ly/d/prisma-schema#accessing-environment-variables-from-the-schema

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

# The following `prisma+postgres` URL is similar to the URL produced by running a local Prisma Postgres 
# server with the `prisma dev` CLI command, when not choosing any non-default ports or settings. The API key, unlike the 
# one found in a remote Prisma Postgres URL, does not contain any sensitive information.

DATABASE_URL="mysql://root:749778@localhost:3306/medicaltime"
JWT_SECRET="ChaveParaGera#0doTokenhsd@!f87329ekl*29382309"
# CORS liberado para desenvolvimento local (Expo Go e Dev Client)
CORS_ORIGINS="http://192.168.15.7:8081,http://192.168.15.7:8082,http://10.1.142.150:8081,http://10.1.142.150:8082,http://192.168.15.8:8081,http://192.168.15.8:8082,http://localhost:3000,http://localhost:19006,http://192.168.1.100:19006,http://localhost:8081,http://127.0.0.1:8081,http://192.168.1.100:8081,http://localhost:8082,http://127.0.0.1:8082,http://192.168.1.100:8082"
CLOUDINARY_CLOUD_NAME="granada"
CLOUDINARY_API_KEY="472927127781476"
CLOUDINARY_API_SECRET="_M0vGvTyoITPWdzonYjbNhXtfHM"
CLOUDINARY_URL="cloudinary://472927127781476:_M0vGvTyoITPWdzonYjbNhXtfHM@granada"
PORT="3000"
NODE_ENV="development"
# Rate Limiting
# Formatos aceitos (string): 15m, 1h, 60000 (ms)
RATE_LIMIT_AUTH_WINDOW="15m"
RATE_LIMIT_AUTH_MAX="20"
RATE_LIMIT_SOS_WINDOW="1h"
RATE_LIMIT_SOS_MAX="5"

# E-mail (Mailtrap para desenvolvimento)
EMAIL_DEV_LOG=true  
FRONTEND_URL="http://192.168.15.7:8081"
# Configurações Mailtrap SMTP
SMTP_HOST="sandbox.smtp.mailtrap.io"
SMTP_PORT="587"
SMTP_USER="a2b0ccaf2296a9"
SMTP_PASS="cb36f65953b0cb"
# Remetente dos emails
MAIL_FROM="granadaandrei@medicaltime.app"

# Logger (opcional)
# LOG_LEVEL=info
# LOG_PRETTY=true

########################################
# Notificações (dev/whatsapp/fcm/expo) #
########################################
# Selecione o provedor de notificação:
#   - dev: logs no console (padrão)
#   - whatsapp: WhatsApp Cloud API (Meta)
#   - fcm: Firebase Cloud Messaging (push)
#   - expo: Expo Push (push)
NOTIFY_PROVIDER="dev"

# Quando true, os provedores executam em "dry-run" (não enviam de verdade), apenas logam.
# Para enviar de fato, defina como false.
NOTIFY_DRY_RUN="true"

# WhatsApp Cloud API (Meta)
# Para habilitar, ajuste:
#   NOTIFY_PROVIDER=whatsapp
#   NOTIFY_DRY_RUN=false
# Observações:
# - Os números de telefone devem estar no formato E.164 (ex.: +5511999999999)
# - Use um template aprovado (opcional) ou texto simples (default sem template)
WHATSAPP_TOKEN=
WHATSAPP_PHONE_ID=
WHATSAPP_API_URL="https://graph.facebook.com/v20.0"
# Se definir um template, o envio usará o nome/idioma abaixo; caso contrário, envia texto simples.
WHATSAPP_TEMPLATE_NAME=
WHATSAPP_TEMPLATE_LANG="pt_BR"
# Retentativas para erros transitórios (5xx/429)
WHATSAPP_RETRY_MAX="2"
WHATSAPP_RETRY_BASE_MS="500"

# FCM/Expo (push) - placeholders
FCM_SERVER_KEY=
EXPO_ACCESS_TOKEN=

# Alarmes (parametrização)
ALARM_RETRY_INTERVAL_MIN="15"
ALARM_MAX_ATTEMPTS="3"
ALARM_MARK_MISSED_AFTER_MIN="45"
ALARM_SCAN_WINDOW_HOURS="6"

# Observabilidade
# Requests podem enviar X-Correlation-Id; o servidor ecoa o header na resposta.
# Nenhuma configuração necessária aqui no momento.

FRONTEND_URLS="http://192.168.15.7:8081,http://192.168.15.7:8082"